<% include ./partials/_header.ejs %>
<h2>Shop</h2>

<div class="card-columns">
    <% items.forEach(item => { %>
        <div class="card" style="width: 24rem;">
            <img class="card-img-top" src="<%= item.img_url %>" >
            <div class="card-body">
                <% if(user && user.isAdmin && editMode) { %>
                    <a href="/items/edit/<%= item._id %>">edit item</a>
                <% } %>
                <h5 class="card-title"><%= item.brand %></h5>
                <h5 class="card-title"><%= item.price %></h5>
                <p class="card-text"><%= item.description %></p>
                <p class="card-text"><%= item.category %></p>
                <p class="card-text"><%= item._id %></p>
                <button data=<%=item._id %>  id="delete-item" class="btn btn-danger">Destroy</button>
            </div>
        </div>
    <% }) %>
</div>
<%
const deleteCard = document.getElementById(data= <%item._id %>);
const handleDeleteCard = (event)=>{
    event.preventDefault();
    if (event.target.classList.contains('delete-item')) {
    deleteItem(event);
  }
}
deleteCard.addEventListener('click', handleDeleteCard);%>
<% include partials/_footer.ejs %>